Лабораторная работа № 2. 
Построение трехмерных графиков. 
Программирование в MatLAB
Цель работы
Целью лабораторной работы является изучение языка программирования среды 
MatLAB. Основной задачей ставится изучение типовых конструкций языка, таких как 
функции, условия и циклы. Также внимание уделяется построению трехмерных графиков.
Построение трехмерных графиков
Для построения трехмерных графиков, во-первых, понадобится создать сетку 
координат на плоскости. Выполняет это функция [X,Y]=meshgrid(x,y), где x и y - 
одномерные массивы, а X и Y - полученные в результате двухмерные массивы. Если 
массивы x и y  одинаковые, то достаточно указать [X,Y]=meshgrid(x). 
Например: 
>> [X,Y]=meshgrid([-2:0.1:2]);
После этого описывается сама функция, например 
>> Z=X.*exp(-X.^2-Y.^2);
После этого подается команда на вывод трехмерного графика: 
>> plot3(X,Y,Z);
Результат исполнения для данного примера приведен на рис. 2.1.
 
Рис. 2.1. Вывод трехмерных графиков
Помимо этой простейшей функции система MatLAB располагает ещё рядом 
функций, позволяющих добиваться большей реалистичности в изображении трехмерных 
графиков. Это функции mesh, surf и surfl.
К примеру, вместо ранее показанного при помощи функции plot3 графика, можно 
вызовом функции mesh получить следующий график (рис. 2.2).
>> mesh(X, Y, Z);
 
Рис. 2.2 Вывод трехмерных графиков.
Программирование в системе MatLAB
Программирование в системе MatLAB очень близко к обычному 
программированию. Программа создается в любом текстовом редакторе. Файл должен 
иметь расширение *.m. Текст М-файла функции должен начинаться с заголовка function, 
имеющего следующий вид:
function [y1, y2, …] = fname(x1, x2, …)
Здесь fname – имя функции, х1, х2 и т.д. – входные параметры, у1, у2 и т.д. – 
выходные параметры. Входные и/или выходные параметры могут отсутствовать. 
На самом деле имя функции определяется не строкой fname, а именем, под 
которым сохранен М-файл, оно должно совпадать с именем функции.
В качестве примера создадим функцию myfunc, которая будет строить трехмерных 
график предыдущего примера и принимать три входных параметра: точку начала 
построения графика, точку окончания построения, шаг. Для этого, открыв окно редактора 
командой меню File -> New -> M-file, вводим текст:
function myfunc(x1, x2, step)
[X,Y]=meshgrid([x1: step : x2]);
Z=X.*exp(-X.^2-Y.^2);
mesh(X, Y, Z);
Введя текст, необходимо сохранить файл под именем myfunc. 
Для того чтобы функция была доступна из системы MatLAB, система должна быть 
способна найти соответствующий М-файл. Поиск файлов осуществляется следующим 
образом: сначала просматривается текущий рабочий каталог (его имя показано в панели 
инструментов главного окна, рис 1.2), а затем каталоги, входящие в путь поиска (MatLAB 
search path).
Для вызова M файла необходимо набрать его имя в командной строке MatLAB, и 
если необходимо его аргументы. Важным элементом, облегчающим программирование, 
являются комментарии. Строка комментария начинается в MatLAB символом ‘%’.
Проверка условия
Оператор проверки условия позволяет организовать разветвление исполнения 
программы. Внешний вид оператора представлен на рис.2.3.

        
Рис. 2.3. Блок-схема условного оператора: редуцированная и полная формы
Формат записи оператора, редуцированная форма:
if условие 
операторы 
end    
полная форма:
if условие
операторы 
elseif  условие 
операторы
else
операторы 
end
Ввод с клавиатуры
x=input(‘строка подсказки’)
x=input(‘строка подсказки’, ‘s’)
Функция input выводит на экран строку подсказки и ждет ввода переменной. 
Функция x=input(‘строка подсказки’, ‘s’) возвращает введенную пользователем строку. 
При вводе переменных допустимо пользоваться стандартными функциями.
Циклы
MatLAB предоставляет пользователю два способа организации цикла. Первый из 
них цикл с известным количеством повторений. Блок-схема этого цикла представлена на 
рис. 2.4.
  
Рис. 2.4. Блок-схема цикла for
Формат оператора:
for переменная = начальное значение : [шаг :] конечное значение
операторы
end
Поле шаг в конструкции оператора не является обязательным. Например:
for i=1:100 
x(i) = sin(2*PI*i/100);
end

Тело цикла обязательно заканчивается служебным словом end.
При работе с циклом for допустимо использование оператора прерывания цикла 
break. При выполнении оператора break работа цикла завершается, и управление 
передается на следующий после конца цикла оператор. Блок-схема программы, 
иллюстрирующий использование оператора break, приведена на рис. 2.5. 
Текст программы соответствующий рис. 2.5.
for i=1:100
операторы 
if a(i) == 0
break 
end
операторы 
end

 
Рис. 2.5. Иллюстрация использования оператора break
Кроме цикла for в программировании на MatLAB используется цикл while. В 
отличие от цикла for  в структуре цикла while не предусмотрены элементы для изменения 
переменной, по которой организован цикл. Эти элементы должен предусмотреть сам 
пользователь в операторах цикла. Блок-схема цикла представлена на рис. 2.6.

 
Рис. 2.6. Блок-схема цикла while
Формат оператора цикла с неизвестным количеством повторений:
while условие
операторы
end
Тело цикла обязательно заканчивается служебным словом end. 
Например, программа определения точности вычислений:
a=1;
while a+1 != 1
a=a/2;
end
a 
Последняя строчка программы выведет на экран значение переменной а.
Задание на лабораторную работу
Написать программу (m-файл), которая строит график сферы или квадратной 
пирамиды по выбору пользователя. Выбор фигуры и длины запрашиваются у  
пользователя в процессе работы функции:
для сферы – это идентификатор и радиус  – ‘сфера’, R.
для пирамиды – это идентификатор, высота, длина стороны основания – ‘пирамида’, 
h, l.

Написать программу (m-файл), которая строит график куба или конуса  по выбору 
пользователя. Выбор фигуры задается как входные параметры функции:
для куба – это  идентификатор и  длина  ребра – ‘куб’, r.
для конуса – это идентификатор, высота, радиус основания – ‘конус’, h,  r.

Написать программу (m-файл), которая  создает трехмерную матрицу и  
“раскрашивает” её значениями в шахматном порядке по  всему объему. Значение 
раскрашивания зависят от входного параметра идентификации id:
id = ‘digit’ – матрица заполняется числами 1 и  0;
id = ‘char’ – матрица заполняется буквами ‘1’ и  ‘0’.
Входные параметры – это размерность матрицы по трём координатам,  
идентификатор;  выходной – сама матрица.

Написать программу (m-файл), которая создает трёхмерную матрицу,  
заполненную  случайными целыми числами (от 0 до 10) и производит 
арифметические поэлементные действия между двумерными массивами этой 
матрицы (по любой координате внутри матрицы).  Значения операции зависит от 
идентификатора:
id = ‘+’
id = ‘–’
id = ‘*’ (поэлементное  умножение).
Размерность матрицы по трём координатам и идентификатор запрашивается у  
пользователя в процессе работы функции.  Выходной параметр – полученная 
матрица.

Написать программу (m-файл), которая раскрашивает черно-белое изображение 
(предпочтительно вашу фотографию) красным или зеленым или синим цветом. 
Цвет зависит от входного параметра:
id = 'красный';
id = 'зеленый';
id = 'синий'.
Входной параметр – раскрашиваемый цвет.

Написать программу (m-файл), которая инвертировала цвета черно-белого 
изображения (черное в белое, белое в черное) и поворачивала рисунок на угол 
кратный 90 вокруг своей оси. Угол поворота зависит от входного параметра:
id = 90 – поворот на 90;
id = 180 – поворот на 180;
id = 270 – поворот на 270;
id = 0 – нет поворота;
Пояснение к заданию 5 и 6:
Изображения представляют собой трёхмерный массив – [x, y, z], где x, y – размеры 
изображения; z – значение цвета. Черный цвет = 0, белый = 255. Для черно-белого 
изображения размерность z = 1, для цветного размерность z = 3.
Цвет состоит из трёх цветов: красного, зеленого, синего. Смешивание этих цветов и 
определяет различные оттенки.
Литература к лабораторной работе №2
Мартынов Н.Н. Иванов А.П. MatLAB 5.x Вычисления. Визуализация. 
Программирование – М.: КУДИЦ-ОБРАЗ, 2000. – 366 с.
Сергиенко А.Б. Цифровая обработка сигналов – СПб.: Питер, 2002. – 608 с.: ил.

